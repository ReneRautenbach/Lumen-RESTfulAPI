{
    "swagger": "2.0",
    "info": {
        "title": "Canpango beer API",
        "description": "Canpango beer API",
        "contact": {
            "email": "rene@clickasite.co.za"
        },
        "version": "1.0.0"
    },
    "host": "localhost:8000",
    "basePath": "/api/v1",
    "schemes": [
        "http",
        "https"
    ],
    "paths": {
        "/beers": {
            "get": {
                "tags": [
                    "beer"
                ],
                "summary": "List all Beers",
                "description": "Returns a list of beers",
                "operationId": "getAllBeers",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "filter",
                        "in": "query",
                        "description": "Filter by beer name and brewery.",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to return",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of result per page to return.",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "name": "orderbydirection",
                        "in": "query",
                        "description": "Sort direction asc or desc.",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "201": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "data": {
                                                    "$ref": "#/definitions/Beer"
                                                },
                                                "first_page_url": {
                                                    "type": "string"
                                                },
                                                "from": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "last_page_url": {
                                                    "type": "string"
                                                },
                                                "next_page_url": {
                                                    "type": "string"
                                                },
                                                "path": {
                                                    "type": "string"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "prev_page_url": {
                                                    "type": "string"
                                                },
                                                "to": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "beer"
                ],
                "summary": "Add Beer",
                "description": "Creates a beer if request parameters are valid and the user is allowed to create a beer.",
                "operationId": "createBeer",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Token to be passed as a header. Use login or register to get the token.Format: Bearer xxxxxx",
                        "required": true,
                        "type": "string",
                        "items": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Beer Object",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/BeerViewModel"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Beer added",
                        "schema": {
                            "$ref": "#/definitions/Beer"
                        }
                    },
                    "401": {
                        "description": "Beer not added. Daily limit reached."
                    },
                    "405": {
                        "description": "Validation exception"
                    }
                }
            }
        },
        "/beers/{beer_id}": {
            "get": {
                "tags": [
                    "beer"
                ],
                "summary": "Return the beer with the given id",
                "description": "Return the beer with given id",
                "operationId": "getBeer",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "beer_id",
                        "in": "path",
                        "description": "The Id of the beer",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "$ref": "#/definitions/Beer"
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                }
            }
        },
        "/reviews/{review_id}": {
            "get": {
                "tags": [
                    "review"
                ],
                "summary": "Return the review with the given id",
                "description": "Return the review with the given id",
                "operationId": "getReview",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "review_id",
                        "in": "path",
                        "description": "The Id of the review",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "$ref": "#/definitions/Review"
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "404": {
                        "description": "Not found."
                    }
                }
            }
        },
        "/reviews/overall": {
            "get": {
                "tags": [
                    "review"
                ],
                "summary": "Provides the overall ratings of all beers",
                "description": "Provides the overall ratings of all beers",
                "operationId": "getBeerReviewOverall",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "beer": {
                                                    "$ref": "#/definitions/Beer"
                                                },
                                                "overall": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "404": {
                        "description": "Not found."
                    }
                }
            }
        },
        "/beers/{beer_id}/reviews": {
            "get": {
                "tags": [
                    "review"
                ],
                "summary": "List of reviews for a beer",
                "description": "List of reviews for a beer",
                "operationId": "getAllReviews",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "beer_id",
                        "in": "path",
                        "description": "The Id of the beer",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "type": "array",
                                        "items": {
                                            "$ref": "#/definitions/Review"
                                        }
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "404": {
                        "description": "Not found."
                    }
                }
            },
            "post": {
                "tags": [
                    "review"
                ],
                "summary": "Add a review of a beer",
                "description": "Creates a review if request parameters are valid and the user is allowed to create a beer review. One review per user per beer is allowed.",
                "operationId": "create",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "beer_id",
                        "in": "path",
                        "description": "The Id of the beer being reviewed",
                        "required": true,
                        "type": "integer"
                    },
                    {
                        "name": "Authorization",
                        "in": "header",
                        "description": "Token to be passed as a header. Use login or register to get the token.Format: Bearer xxxxxx",
                        "required": true,
                        "type": "string",
                        "items": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "Beer Review Object",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/ReviewViewModel"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Beer added",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "$ref": "#/definitions/Review"
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "401": {
                        "description": "Beer review not added. User limit reached."
                    },
                    "404": {
                        "description": "Review not added. Beer not found."
                    },
                    "405": {
                        "description": "Validation exception"
                    }
                }
            }
        },
        "/beers/{beer_id}/reviews/overall": {
            "get": {
                "tags": [
                    "review"
                ],
                "summary": "Provides the overall rating of a beer",
                "description": "Provides the overall rating of a beer",
                "operationId": "getBeerReviewOverall",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "beer_id",
                        "in": "path",
                        "description": "The Id of the beer",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "beer": {
                                                    "$ref": "#/definitions/Beer"
                                                },
                                                "overall_aroma": {
                                                    "type": "integer"
                                                },
                                                "overall_appearance": {
                                                    "type": "integer"
                                                },
                                                "overall_taste": {
                                                    "type": "integer"
                                                },
                                                "overall": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "404": {
                        "description": "Not found."
                    }
                }
            }
        },
        "/styles": {
            "post": {
                "tags": [
                    "style"
                ],
                "summary": "Filtered list of styles",
                "description": "Returns filtered list of beer styles",
                "operationId": "getStyles",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "filter",
                        "in": "query",
                        "description": "Filter by style description.",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number to return",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of result per page to return.",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "name": "orderbydirection",
                        "in": "query",
                        "description": "Sort direction asc or desc.",
                        "required": false,
                        "type": "string"
                    }
                ],
                "responses": {
                    "201": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "message": {
                                        "type": "string"
                                    },
                                    "data": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "data": {
                                                    "$ref": "#/definitions/StyleViewModel"
                                                },
                                                "first_page_url": {
                                                    "type": "string"
                                                },
                                                "from": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "last_page_url": {
                                                    "type": "string"
                                                },
                                                "next_page_url": {
                                                    "type": "string"
                                                },
                                                "path": {
                                                    "type": "string"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "prev_page_url": {
                                                    "type": "string"
                                                },
                                                "to": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    },
                                    "error": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                }
            }
        },
        "/user/register": {
            "post": {
                "tags": [
                    "user"
                ],
                "summary": "Register a new user",
                "description": "Creates a new user.",
                "operationId": "register",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "User Object",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/UserRegisterViewModel"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User added",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    },
                    "404": {
                        "description": "User not found."
                    },
                    "422": {
                        "description": "Unprocessable Entity."
                    },
                    "405": {
                        "description": "User not added. Validation failed."
                    }
                }
            }
        },
        "/user/login": {
            "post": {
                "tags": [
                    "user"
                ],
                "summary": "User Login",
                "description": "Authenticates username and password and logs a user in.",
                "operationId": "login",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "User Email and password",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/UserLoginViewModel"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "type": "array",
                            "items": {
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        },
                        "headers": {
                            "X-Rate-Limit": {
                                "description": "calls per hour allowed by the user",
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "ErrorModel": {
            "required": [
                "code",
                "message"
            ],
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int32"
                },
                "message": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "Beer": {
            "required": [
                "name",
                "ibu",
                "calories",
                "user_id",
                "abv",
                "brewery",
                "location",
                "style"
            ],
            "properties": {
                "id": {
                    "description": "The beer unique identifier.",
                    "type": "integer",
                    "format": "int64"
                },
                "name": {
                    "description": "The beer name.",
                    "type": "string"
                },
                "ibu": {
                    "description": "The beer International Bitterness Units scale value.",
                    "type": "integer",
                    "format": "int32"
                },
                "calories": {
                    "description": "The beer name.",
                    "type": "integer",
                    "format": "int32"
                },
                "abv": {
                    "description": "The beer Alcohol By Volume value.",
                    "type": "number",
                    "format": "float"
                },
                "brewery": {
                    "description": "The brewery name.",
                    "type": "string"
                },
                "location": {
                    "description": "The brewery location.",
                    "type": "string"
                },
                "style_id": {
                    "description": "The beer style.",
                    "type": "integer",
                    "format": "int32"
                },
                "user_id": {
                    "description": "The user who added the beer",
                    "type": "integer",
                    "format": "int64"
                },
                "created_at": {
                    "description": "The date time the beer was added",
                    "type": "string",
                    "format": "date-time"
                },
                "updated_at": {
                    "description": "The date time the beer was updated",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "type": "object",
            "xml": {
                "name": "Beer"
            }
        },
        "Review": {
            "required": [
                "aroma",
                "appearance",
                "taste",
                "user_id",
                "beer_id"
            ],
            "properties": {
                "id": {
                    "description": "The review unique identifier.",
                    "type": "integer",
                    "format": "int64"
                },
                "user_id": {
                    "description": "The user who added the review",
                    "type": "integer",
                    "format": "int64"
                },
                "beer_id": {
                    "description": "The beer being reviewed",
                    "type": "integer",
                    "format": "int64"
                },
                "aroma": {
                    "description": "The beer aroma review value between 1 and 5",
                    "type": "integer",
                    "format": "int32"
                },
                "appearance": {
                    "description": "The beer appearance review value between 1 and 5",
                    "type": "integer",
                    "format": "int32"
                },
                "taste": {
                    "description": "The beer taste review value between 1 and 10",
                    "type": "integer",
                    "format": "int32"
                },
                "created_at": {
                    "description": "The date time the review was added",
                    "type": "string",
                    "format": "date-time"
                },
                "updated_at": {
                    "description": "The date time the review was updated",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "type": "object",
            "xml": {
                "name": "Review"
            }
        },
        "Style": {
            "required": [
                "style"
            ],
            "properties": {
                "id": {
                    "description": "The style unique identifier.",
                    "type": "integer",
                    "format": "int64"
                },
                "style": {
                    "description": "The style name.",
                    "type": "string"
                },
                "style_category_id": {
                    "description": "The category of the style.",
                    "type": "integer",
                    "format": "int32"
                }
            },
            "type": "object",
            "xml": {
                "name": "Style"
            }
        },
        "StyleCategory": {
            "required": [
                "style_category"
            ],
            "properties": {
                "id": {
                    "description": "The style category unique identifier.",
                    "type": "integer",
                    "format": "int64"
                },
                "style_category": {
                    "description": "The style category.",
                    "type": "string"
                }
            },
            "type": "object",
            "xml": {
                "name": "StyleCategory"
            }
        },
        "User": {
            "required": [
                "name",
                "email",
                "password"
            ],
            "properties": {
                "id": {
                    "description": "The unique user identifier.",
                    "type": "integer",
                    "format": "int64"
                },
                "name": {
                    "description": "The user name",
                    "type": "string"
                },
                "password": {
                    "description": "The user password",
                    "type": "string",
                    "format": "password"
                },
                "email": {
                    "description": "The unique user email",
                    "type": "string",
                    "format": "email"
                },
                "daily_beer_limit": {
                    "description": "The numbers of beers the user can add per day. Default value is 1.",
                    "type": "integer",
                    "format": "int32"
                },
                "created_at": {
                    "description": "The date time the user was added",
                    "type": "string",
                    "format": "date-time"
                },
                "updated_at": {
                    "description": "The date time the user was updated",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "type": "object",
            "xml": {
                "name": "User"
            }
        },
        "BeerViewModel": {
            "required": [
                "name",
                "ibu",
                "calories",
                "abv",
                "brewery",
                "location",
                "style"
            ],
            "properties": {
                "name": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "ibu": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "calories": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "abv": {
                    "description": "",
                    "type": "number",
                    "format": "float"
                },
                "brewery": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "location": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "style_id": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                }
            },
            "type": "object",
            "xml": {
                "name": "BeerViewModel"
            }
        },
        "FilterViewModel": {
            "required": [
                "aroma",
                "appearance",
                "taste"
            ],
            "properties": {
                "filter": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "page": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "per_page": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "orderby": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                }
            },
            "type": "object",
            "xml": {
                "name": "FilterViewModel"
            }
        },
        "JSONResponse": {
            "properties": {
                "success": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "message": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "data": {
                    "description": "",
                    "type": "string",
                    "format": "array"
                },
                "error": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "code": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                }
            },
            "type": "object",
            "xml": {
                "name": "JSONResponse"
            }
        },
        "ReviewViewModel": {
            "required": [
                "aroma",
                "appearance",
                "taste"
            ],
            "properties": {
                "aroma": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "appearance": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "taste": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                }
            },
            "type": "object",
            "xml": {
                "name": "ReviewViewModel"
            }
        },
        "StyleViewModel": {
            "properties": {
                "style_id": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "style": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "style_category_id": {
                    "description": "",
                    "type": "integer",
                    "format": "integer"
                },
                "style_category": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                }
            },
            "type": "object",
            "xml": {
                "name": "StyleViewModel"
            }
        },
        "UserLoginViewModel": {
            "required": [
                "email",
                "password"
            ],
            "properties": {
                "email": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "password": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                }
            },
            "type": "object",
            "xml": {
                "name": "UserLoginViewModel"
            }
        },
        "UserRegisterViewModel": {
            "required": [
                "name",
                "email",
                "password"
            ],
            "properties": {
                "name": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "email": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "password": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                },
                "password_confirmation": {
                    "description": "",
                    "type": "string",
                    "format": "string"
                }
            },
            "type": "object",
            "xml": {
                "name": "UserRegisterViewModel"
            }
        }
    }
}